---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  echo = FALSE
  )
```

## Predicting this season's Premier League

My predictions combine [open data](https://www.football-data.co.uk/mmz4281/2526/E0.csv) with a simplified version of [David Firth's approach](https://github.com/DavidFirth/alt3code). 

These predictions are based upon a team's strength, given its recent performance. But how should we define *recent*? In order to duck this question, I choose two different time periods:

  * over all of last season and this season so far; and
  * over the last 19 games (i.e. half season)


### Predictions with a longer memory
**(Based upon performances over last season and this season so far)**

```{r}
readr::read_csv(
  file = "projections76.csv", 
  show_col_types = FALSE
  ) |> 
  dplyr::mutate(
    dplyr::across(
      .cols = c(-midName), 
      .fns = ~formattable::percent(.x, digits = 1)
      )
    ) |> 
  knitr::kable(
    format = "html",
    col.names = c("Team ", "Champion", "Top 4", "Top 5", "Top 6", "Top Half", "Relegation"), 
    digits = c(0, rep(4, 6)),
    padding = 10
    )
```

<br/>

### Predictions with a shorter memory
**(Based upon performances over the last 19 games, be that this season or last season)**

```{r}
readr::read_csv(
  file = "projections19.csv", 
  show_col_types = FALSE
  ) |> 
  dplyr::mutate(
    dplyr::across(
      .cols = c(-midName), 
      .fns = ~formattable::percent(.x, digits = 1)
      )
    ) |> 
  knitr::kable(
    format = "html",
    col.names = c("Team ", "Champion", "Top 4", "Top 5", "Top 6", "Top Half", "Relegation"), 
    digits = c(0, rep(4, 6)),
    padding = 10
    )
```

<br/>

### Notes and data

Please note that 0.0% and 100.0% outcomes do not necessarily signify certainty in their specific assessment, as: 

  * this model uses 400,000 simulations and not 1,000;
  * the skill of a team is assumed to be static over the remainder of the season -- an assumption that I aim to relax in time; and more pertinently
  * this model, like all models, is imperfect -- but, I think, better than no model at all


Finally, this page is updated daily in the season with the latest available data. At this point, that means games up to:

`r readr::read_csv(
  file = "latest_game.csv", 
  show_col_types = FALSE
  ) |> 
  dplyr::mutate(
    output = paste0(
      homeTeam,
      " ",
      FTHG,
      " - ",
      FTAG,
      " ",
      awayTeam,
      " (played on ",
      matchday,
      ")"
      )
    ) |> 
  dplyr::pull(output)`

